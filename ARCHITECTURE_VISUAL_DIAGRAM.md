# R3AL Cloud Architecture - Visual Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           R3AL MOBILE APP (React Native)                    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Music Studio â”‚  â”‚Writers Guild â”‚  â”‚ Tactical HQ  â”‚  â”‚   Premium    â”‚   â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚   Features   â”‚   â”‚
â”‚  â”‚ â€¢ Create     â”‚  â”‚ â€¢ Projects   â”‚  â”‚ â€¢ Dashboard  â”‚  â”‚ â€¢ AI Images  â”‚   â”‚
â”‚  â”‚ â€¢ Generate   â”‚  â”‚ â€¢ Sessions   â”‚  â”‚ â€¢ Comms      â”‚  â”‚ â€¢ AI Chat    â”‚   â”‚
â”‚  â”‚ â€¢ Share      â”‚  â”‚ â€¢ AI Assist  â”‚  â”‚ â€¢ Analysis   â”‚  â”‚ â€¢ Usage      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                     â”‚                                        â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                          â”‚   tRPC Client       â”‚                            â”‚
â”‚                          â”‚ (app/lib/trpc.ts)   â”‚                            â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                     â”‚                                        â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                          â”‚  Storage Service     â”‚                           â”‚
â”‚                          â”‚(app/services/storage)â”‚                           â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚ HTTPS
                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OPTIMA CLOUD BACKEND                                      â”‚
â”‚          https://optima-core-712497593637.us-central1.run.app               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        API Gateway / Hono                           â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚
â”‚  â”‚  â”‚ /api/trpc/* â”‚   â”‚ /api/music/*â”‚   â”‚ /api/writersâ”‚             â”‚    â”‚
â”‚  â”‚  â”‚ (tRPC Router)â”‚   â”‚             â”‚   â”‚            â”‚             â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚
â”‚  â”‚  â”‚/api/tacticalâ”‚   â”‚/api/premium â”‚   â”‚/api/storage â”‚             â”‚    â”‚
â”‚  â”‚  â”‚            â”‚   â”‚            â”‚   â”‚            â”‚             â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚  â”‚  â”‚          /api/subscription   |   /api/ai/chat       â”‚          â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      Business Logic Layer                          â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
â”‚  â”‚  â”‚ Music Service â”‚  â”‚Writers Serviceâ”‚  â”‚Tactical Serviceâ”‚         â”‚    â”‚
â”‚  â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚         â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Generate     â”‚  â”‚â€¢ AI Assist    â”‚  â”‚â€¢ SR Analysis  â”‚         â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Process      â”‚  â”‚â€¢ Auto-save    â”‚  â”‚â€¢ Encrypt      â”‚         â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Share        â”‚  â”‚â€¢ Export       â”‚  â”‚â€¢ Incident Mgt â”‚         â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
â”‚  â”‚  â”‚ Premium Svc   â”‚  â”‚Subscription Svcâ”‚  â”‚ Storage Svc   â”‚         â”‚    â”‚
â”‚  â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚         â”‚    â”‚
â”‚  â”‚  â”‚â€¢ Image Gen    â”‚  â”‚â€¢ Access Controlâ”‚  â”‚â€¢ Upload/DL    â”‚         â”‚    â”‚
â”‚  â”‚  â”‚â€¢ AI Chat      â”‚  â”‚â€¢ Usage Track  â”‚  â”‚â€¢ Signed URLs  â”‚         â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                         â”‚   â”‚                         â”‚
         â”‚   PostgreSQL Database   â”‚   â”‚  Cloud Storage Buckets  â”‚
         â”‚   (Cloud SQL)           â”‚   â”‚  (Google Cloud Storage) â”‚
         â”‚                         â”‚   â”‚                         â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚  â”‚ music_projects   â”‚   â”‚   â”‚  â”‚r3al-studio-music â”‚   â”‚
         â”‚  â”‚ music_stems      â”‚   â”‚   â”‚  â”‚                  â”‚   â”‚
         â”‚  â”‚ music_shares     â”‚   â”‚   â”‚  â”‚ /users/{id}/     â”‚   â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚   /projects/     â”‚   â”‚
         â”‚                         â”‚   â”‚  â”‚     /stems/      â”‚   â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚     /mixed/      â”‚   â”‚
         â”‚  â”‚ guild_members    â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â”‚  â”‚ writing_projects â”‚   â”‚   â”‚                         â”‚
         â”‚  â”‚ writing_sessions â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚r3al-writers-guildâ”‚   â”‚
         â”‚                         â”‚   â”‚  â”‚                  â”‚   â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚ /users/{id}/     â”‚   â”‚
         â”‚  â”‚ tactical_users   â”‚   â”‚   â”‚  â”‚   /projects/     â”‚   â”‚
         â”‚  â”‚ tactical_comms   â”‚   â”‚   â”‚  â”‚     /versions/   â”‚   â”‚
         â”‚  â”‚ tactical_incidentsâ”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚                         â”‚
         â”‚                         â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚r3al-premium-imgs â”‚   â”‚
         â”‚  â”‚ premium_images   â”‚   â”‚   â”‚  â”‚                  â”‚   â”‚
         â”‚  â”‚ subscription_tiersâ”‚  â”‚   â”‚  â”‚ /users/{id}/     â”‚   â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚   /generations/  â”‚   â”‚
         â”‚                         â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚
                                       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                                       â”‚  â”‚r3al-tactical-sec â”‚   â”‚
                                       â”‚  â”‚(Encrypted Files) â”‚   â”‚
                                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                       â”‚                         â”‚
                                       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                                       â”‚  â”‚r3al-user-media   â”‚   â”‚
                                       â”‚  â”‚(Profiles & NFTs) â”‚   â”‚
                                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        EXTERNAL AI SERVICES                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   MusicGen     â”‚  â”‚   DALL-E 3     â”‚  â”‚    GPT-4       â”‚               â”‚
â”‚  â”‚   (Meta)       â”‚  â”‚   (OpenAI)     â”‚  â”‚   (OpenAI)     â”‚               â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚               â”‚
â”‚  â”‚ Text â†’ Audio   â”‚  â”‚ Text â†’ Image   â”‚  â”‚ AI Chat        â”‚               â”‚
â”‚  â”‚ 30s clips      â”‚  â”‚ 1024x1024      â”‚  â”‚ Writing Assist â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   Mubert       â”‚  â”‚   Claude       â”‚  â”‚  Optima SR     â”‚               â”‚
â”‚  â”‚   (Alt Music)  â”‚  â”‚   (Anthropic)  â”‚  â”‚  (Custom)      â”‚               â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚               â”‚
â”‚  â”‚ Commercial API â”‚  â”‚ Alternative AI â”‚  â”‚ Tactical AI    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA FLOW EXAMPLE                                   â”‚
â”‚                                                                              â”‚
â”‚  Music Generation Flow:                                                      â”‚
â”‚                                                                              â”‚
â”‚  1. User taps "Generate" in Music Studio UI                                 â”‚
â”‚  2. App calls: trpc.r3al.studio.generateMusic.useMutation()                 â”‚
â”‚  3. tRPC sends request to /api/trpc/r3al.studio.generateMusic               â”‚
â”‚  4. Backend receives request                                                â”‚
â”‚  5. Backend calls MusicGen API with prompt                                  â”‚
â”‚  6. MusicGen returns audio data (base64 or URL)                             â”‚
â”‚  7. Backend uploads to Cloud Storage: r3al-studio-music/...                 â”‚
â”‚  8. Backend saves metadata to music_projects table                          â”‚
â”‚  9. Backend returns { stemUrls, mixUrl, status }                            â”‚
â”‚  10. App displays generated music with playback controls                    â”‚
â”‚                                                                              â”‚
â”‚  Image Generation Flow:                                                      â”‚
â”‚                                                                              â”‚
â”‚  1. User enters prompt in Premium Image screen                              â”‚
â”‚  2. App calls: trpc.r3al.premium.generateImage.useMutation()                â”‚
â”‚  3. Backend checks subscription tier (has access?)                          â”‚
â”‚  4. Backend calls DALL-E 3 API                                              â”‚
â”‚  5. DALL-E returns image (base64)                                           â”‚
â”‚  6. Backend uploads to Cloud Storage: r3al-premium-images/...               â”‚
â”‚  7. Backend generates thumbnail                                             â”‚
â”‚  8. Backend saves to premium_image_generations table                        â”‚
â”‚  9. Backend tracks usage in subscription_tiers                              â”‚
â”‚  10. Backend returns { generationId, imageUrl, thumbnailUrl }               â”‚
â”‚  11. App displays generated image                                           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SUBSCRIPTION TIER LOGIC                               â”‚
â”‚                                                                              â”‚
â”‚  FREE TIER (Default)                                                         â”‚
â”‚  â”œâ”€ 3 AI chat messages per day                                              â”‚
â”‚  â”œâ”€ 1 image generation per week                                             â”‚
â”‚  â”œâ”€ Profile creation                                                         â”‚
â”‚  â”œâ”€ Feed access (read-only)                                                 â”‚
â”‚  â””â”€ No music or writing features                                            â”‚
â”‚                                                                              â”‚
â”‚  PREMIUM TIER ($9.99/month)                                                  â”‚
â”‚  â”œâ”€ 100 AI chat messages per day                                            â”‚
â”‚  â”œâ”€ 20 image generations per month                                          â”‚
â”‚  â”œâ”€ 5 music projects                                                         â”‚
â”‚  â”œâ”€ 10 writing projects                                                      â”‚
â”‚  â”œâ”€ Standard AI assistance                                                  â”‚
â”‚  â””â”€ Social sharing features                                                 â”‚
â”‚                                                                              â”‚
â”‚  UNLIMITED TIER ($29.99/month)                                               â”‚
â”‚  â”œâ”€ âˆ AI chat messages                                                      â”‚
â”‚  â”œâ”€ âˆ Image generations                                                     â”‚
â”‚  â”œâ”€ âˆ Music & writing projects                                              â”‚
â”‚  â”œâ”€ Advanced AI models                                                       â”‚
â”‚  â”œâ”€ Priority processing                                                      â”‚
â”‚  â”œâ”€ Tactical HQ access                                                       â”‚
â”‚  â””â”€ White-glove support                                                      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SECURITY LAYERS                                    â”‚
â”‚                                                                              â”‚
â”‚  1. Authentication                                                           â”‚
â”‚     â””â”€ JWT tokens, Firebase Auth                                            â”‚
â”‚                                                                              â”‚
â”‚  2. Authorization                                                            â”‚
â”‚     â””â”€ Check user tier before feature access                                â”‚
â”‚                                                                              â”‚
â”‚  3. Rate Limiting                                                            â”‚
â”‚     â””â”€ Per-tier request limits                                              â”‚
â”‚                                                                              â”‚
â”‚  4. Input Validation                                                         â”‚
â”‚     â””â”€ Sanitize all user inputs                                             â”‚
â”‚                                                                              â”‚
â”‚  5. File Upload Security                                                     â”‚
â”‚     â””â”€ Size limits, type validation, virus scanning                         â”‚
â”‚                                                                              â”‚
â”‚  6. Encryption                                                               â”‚
â”‚     â””â”€ AES-256 for Tactical HQ files                                        â”‚
â”‚                                                                              â”‚
â”‚  7. CORS Configuration                                                       â”‚
â”‚     â””â”€ Allow only authorized origins                                        â”‚
â”‚                                                                              â”‚
â”‚  8. API Key Management                                                       â”‚
â”‚     â””â”€ Secure storage of OpenAI, MusicGen keys                              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Points

### âœ… **Frontend is 100% Complete**
- All UI screens built
- All tRPC calls implemented
- Storage services ready
- Type-safe throughout

### ğŸš§ **Backend Needs Implementation**
- Create 5 Cloud Storage buckets
- Create 11 database tables
- Implement 23 API endpoints
- Integrate 4 AI services

### ğŸ”— **Integration Points**
1. **tRPC** - Type-safe RPC between frontend and backend
2. **Cloud Storage** - File uploads/downloads via signed URLs
3. **AI Services** - External APIs for generation
4. **Database** - PostgreSQL for all structured data

### ğŸ“Š **Data Flow**
1. User interacts with UI
2. UI calls tRPC mutation/query
3. Backend receives typed request
4. Backend processes (AI, storage, DB)
5. Backend returns typed response
6. UI updates with new data

### ğŸ” **Security**
- JWT authentication on all routes
- Tier-based authorization
- Rate limiting per user
- Encrypted tactical files
- Input sanitization

---

**This architecture ensures clean separation between frontend and backend while maintaining type safety and scalability.**
