# R3AL App - Schema-Driven Architecture

## Overview

R3AL is a truth-verified social application built on the RORK kernel using a comprehensive schema-driven architecture. The app features identity verification, truth-score questionnaires, and privacy-focused design.

**Motto:** Reveal â€¢ Relate â€¢ Respect

## Architecture

### Core Principles

1. **Schema-Driven UI**: All screens, components, and navigation are defined in JSON schemas
2. **Modular Design**: Separate concerns (UI, content, logic, theming) into distinct files
3. **Privacy-First**: Opt-in analytics, encrypted data, explicit consent management
4. **Accessibility**: Multi-sensory feedback (visual, audio, haptic) built-in
5. **Internationalization**: Full i18n support with locale token system

## Directory Structure

```
apps/r3al/
â”œâ”€â”€ manifest.json                    # App configuration and feature flags
â”œâ”€â”€ theme/
â”‚   â””â”€â”€ ui_tokens.json              # Design tokens (colors, fonts, spacing)
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ app_schema.json             # UI layout and navigation definition
â”‚   â”œâ”€â”€ questionnaire_schema.json   # Truth questionnaire content
â”‚   â”œâ”€â”€ truthscore_schema.json      # Scoring logic and algorithms
â”‚   â”œâ”€â”€ accessibility_map.json      # Feedback triggers for events
â”‚   â””â”€â”€ locale_tokens.json          # Internationalization strings
â”œâ”€â”€ legal/
â”‚   â”œâ”€â”€ privacy_policy.md           # Privacy policy (Privacy Act 1974 compliant)
â”‚   â”œâ”€â”€ user_agreement.md           # Terms of service
â”‚   â””â”€â”€ nda_consent.md              # Non-disclosure agreement
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ brandguide.txt              # Brand guidelines
â””â”€â”€ assets/                          # Images, animations, audio files
```

## Generated By RORK Build Script

Run the build script to auto-generate the complete R3AL app structure:

```bash
node scripts/rork_build_r3al.js
```

This will:
1. Create the complete directory structure in `apps/r3al/`
2. Generate all schema files with comprehensive configurations
3. Write legal documents (Privacy Policy, Terms, NDA)
4. Create brand guidelines
5. Register the app in `rork_registry.json`

## Key Features

### 1. Identity Verification Module
- **Document Scanning**: Government ID capture with camera
- **Biometric Verification**: Selfie with liveness detection
- **Real-time Matching**: Data matching and decisioning
- **Token Storage**: Verification token for reuse

### 2. Truth-Score Questionnaire
- **Multi-type Questions**: Multiple-choice, Likert scales, free text
- **Weighted Scoring**: Algorithm-based score calculation
- **Consistency Checks**: Cross-validation between answers
- **Dynamic Follow-ups**: Conditional questions based on responses
- **Expansion Module**: Optional deep-dive into truth components

### 3. Multi-Phase Onboarding
- **Phase 1**: Welcome and feature highlights
- **Phase 2**: Data consent and privacy agreement
- **Phase 3**: Identity verification flow
- **Phase 4**: Truth questionnaire completion
- **Phase 5**: Profile setup and customization

### 4. Privacy & Compliance
- **Explicit Consent**: Required for all data collection
- **Optional Analytics**: Opt-in only, never forced
- **Encrypted Storage**: AES-256 for sensitive data
- **Regulatory Compliance**: GDPR, CCPA, Privacy Act of 1974

### 5. Accessibility Features
- **Screen Reader**: Full VoiceOver/TalkBack support
- **Haptic Feedback**: Tactile cues on key events
- **Audio Cues**: Sound effects for state changes
- **High Contrast**: Accessible color modes
- **Keyboard Navigation**: Full keyboard/switch control support

## Schema Files Overview

### manifest.json
App identity, permissions, feature flags, and schema references.

**Key Sections:**
- `app_id`, `name`, `version`: App identification
- `permissions`: Device capabilities (camera, biometric)
- `features`: Flags for RiseN AI, Optima II, analytics
- `schemas`: References to all schema files
- `consent_required`: Enforces consent flow
- `last_legal_update`: Version tracking for legal docs

### theme/ui_tokens.json
Centralized design system with tokens for:
- **Colors**: Primary, secondary, background, accent, error, success
- **Typography**: Font families, weights, sizes
- **Spacing**: Padding, margins, border radius
- **Animations**: Timing and scale parameters

### schemas/app_schema.json
Complete UI definition using declarative component schema.

**Features:**
- Screen definitions with types and properties
- Component trees with data bindings
- Navigation flows (stack and modal)
- Event handlers and actions
- Locale/theme token references

### schemas/questionnaire_schema.json
Truth questionnaire content and behavior.

**Includes:**
- Question definitions (text, type, options)
- Weighting system for scoring
- Truth indicators (honesty, diligence, transparency)
- Consistency check rules
- Follow-up question logic

### schemas/truthscore_schema.json
Score calculation model and algorithms.

**Components:**
- Base scoring model (weighted_sum)
- Point mappings for answer options
- Integration hooks for AI modules (RiseN, Optima II)
- Output schema (score, level, details, charts)

### schemas/accessibility_map.json
Multi-sensory feedback configuration.

**Defines:**
- Event-to-feedback mappings (audio, haptic, visual)
- Component accessibility properties
- Screen reader instructions
- Focus management rules

### schemas/locale_tokens.json
Internationalization string resources.

**Supports:**
- Multiple languages (en, es, expandable)
- Screen text and labels
- Error messages
- Legal document URLs
- Dynamic content bindings

## Backend Integration

### AI/ML Modules (Stubbed)

**RiseN AI** - Truth Analysis Engine
```json
{
  "name": "RiseN_AI",
  "function": "analyzeTruth(answers)",
  "output": {
    "consistency": "number",
    "anomalies": "list"
  }
}
```

**Optima II** - Score Optimization
```json
{
  "name": "Optima_II", 
  "function": "optimizeScore(baseScore, context)",
  "output": {
    "adjustedScore": "number"
  }
}
```

### Security Architecture

- **JWT Authentication**: Token-based auth with consent metadata
- **Data Encryption**: AES-256 at rest, TLS 1.3 in transit
- **Sandboxed Storage**: Isolated secure storage areas
- **Privacy by Design**: Minimal data collection, maximum protection

### API Endpoints (Backend)

```
POST   /api/verify/document        # Submit ID document
POST   /api/verify/biometric       # Submit biometric data
POST   /api/questionnaire/submit   # Submit answers
GET    /api/truthscore/:userId     # Retrieve score
POST   /api/profile/create         # Create user profile
PUT    /api/profile/update         # Update profile
GET    /api/consent/status         # Check consent state
POST   /api/consent/update         # Update consent
```

## Customization Guide

### Changing Theme Colors
Edit `apps/r3al/theme/ui_tokens.json`:
```json
{
  "colors": {
    "primary": "#1E90FF",    // Change to your brand color
    "accent": "#FFC107"      // Change accent color
  }
}
```

### Adding Questions
Edit `apps/r3al/schemas/questionnaire_schema.json`:
```json
{
  "questions": [
    {
      "id": "Q6",
      "text": "Your new question?",
      "type": "multiple-choice",
      "options": ["Option A", "Option B"],
      "weight": 10,
      "truth_indicator": "honesty"
    }
  ]
}
```

### Translating to New Language
Edit `apps/r3al/schemas/locale_tokens.json`:
```json
{
  "fr": {
    "welcome_title": "Bienvenue Ã  R3AL",
    "welcome_message": "Votre voyage vers la vÃ©ritÃ© commence ici.",
    ...
  }
}
```

### Updating Legal Documents
1. Edit files in `apps/r3al/legal/`
2. Update `manifest.json` `last_legal_update` field
3. Users will be prompted to re-consent on next login

## Development Workflow

### 1. Generate App Structure
```bash
node scripts/rork_build_r3al.js
```

### 2. Customize Schemas
Edit files in `apps/r3al/schemas/` and `apps/r3al/theme/`

### 3. Add Assets
Place files in `apps/r3al/assets/`:
- Images: PNG, JPG, SVG
- Animations: MP4, GIF, Lottie JSON
- Audio: WAV, MP3 for feedback sounds

### 4. Test Configuration
Validate JSON schemas:
```bash
node scripts/validate_r3al_schemas.js
```

### 5. Build React Native App
RORK will parse schemas and generate app:
```bash
rork build r3al
```

## Compliance & Legal

### Privacy Act of 1974 (5 U.S.C. Â§552a)
âœ… Explicit consent for data collection  
âœ… User rights: access, modify, delete  
âœ… Clear data usage disclosure  
âœ… Opt-in for non-essential features  

### GDPR Requirements
âœ… Right to erasure (delete account)  
âœ… Data portability (export data)  
âœ… Freely-given consent (not forced)  
âœ… Privacy by design (minimal collection)  

### CCPA Requirements
âœ… Data collection disclosure  
âœ… Opt-out mechanisms available  
âœ… No data sale  
âœ… Consumer rights notices  

## Roadmap

### âœ… Phase 1: Schema Architecture (Complete)
- [x] Design schema structure
- [x] Create all schema files
- [x] Document architecture
- [x] Build auto-generation script

### ðŸ”„ Phase 2: RORK Integration (In Progress)
- [ ] Schema parser implementation
- [ ] React Native component generator
- [ ] Navigation system builder
- [ ] State management setup

### ðŸ“‹ Phase 3: Backend Services (Planned)
- [ ] Implement RiseN AI module
- [ ] Implement Optima II module
- [ ] Build API backend
- [ ] Set up authentication service

### ðŸ“‹ Phase 4: Testing & QA (Planned)
- [ ] Accessibility audit
- [ ] Security testing
- [ ] Privacy compliance review
- [ ] User acceptance testing

### ðŸ“‹ Phase 5: Deployment (Planned)
- [ ] App store submission prep
- [ ] Legal final review
- [ ] Beta release
- [ ] Production launch

## Support & Contact

- **Documentation**: `/apps/r3al/docs/`
- **Privacy Questions**: privacy@r3al.app
- **Security Issues**: security@r3al.app
- **General Support**: support@r3al.app

## License

Proprietary. All rights reserved.  
See `apps/r3al/legal/nda_consent.md` for usage restrictions.

---

**Version:** 1.0.0  
**Build Date:** 2025-10-29  
**RORK Kernel Compatible**  
**Motto:** Reveal â€¢ Relate â€¢ Respect  

## Quick Start

```bash
# 1. Generate R3AL app structure
node scripts/rork_build_r3al.js

# 2. Review generated schemas
ls -la apps/r3al/schemas/

# 3. Customize as needed
nano apps/r3al/theme/ui_tokens.json

# 4. Build app (when RORK parser ready)
rork build r3al

# 5. Run app
rork run r3al
```

The R3AL app is now fully specified and ready for RORK to build!
